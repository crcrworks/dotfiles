# Subagent Delegation Rules

## 基本原則

**自分で実装しない。** すべてサブエージェントに委譲する。

## サブエージェント一覧と用途

| サブエージェント | 用途 | 呼び出しタイミング |
|---------------|------|----------------|
| `planner` | 計画の詳細化、設計決定 | 複雑な設計が必要な時 |
| `explore` | コードベース検索、パターン発見 | 検索、探索が必要な時 |
| `general` | 一般的な実装タスク | 標準的な実装時 |
| `spec-reviewer` | 仕様適合レビュー | 実装完了後 |
| `code-reviewer` | コード品質レビュー | spec-reviewer通過後 |
| `security-reviewer` | セキュリティレビュー | 機密処理がある時 |
| `tdd-guide` | TDDワークフロー指導 | TDD実施時 |
| `build-resolver` | ビルドエラー解決 | ビルド失敗時 |
| `refactor-cleaner` | リファクタリング | コード整理時 |

## 委譲パターン

### Planエージェントからの委譲

```
検索が必要 → exploreサブエージェント
設計が複雑 → plannerサブエージェント
コード探索 → generalサブエージェント
```

### Buildエージェントからの委譲

```
実装タスク → generalサブエージェント
仕様確認 → spec-reviewerサブエージェント
品質確認 → code-reviewerサブエージェント
セキュリティ確認 → security-reviewerサブエージェント
```

## 禁止事項

- 自分でファイルを直接編集しない（`.opencode/`内を除く）
- 自分でコードを書かない
- サブエージェントを使わずに調査しない

## 例外

以下は直接実行可能：

- ファイルの読み取り（`read`ツール）
- サブエージェントの呼び出し（`task`ツール）
- スキルの読み取り（`skill`ツール）
- TODOリスト管理（`todowrite`/`todoread`）
- 検証コマンドの実行（テスト実行など）
